<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025: The Year in Code</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-color: #1e1e1e;
            --accent: #bb86fc;
            --secondary: #03dac6;
            --text: #ffffff;
            --font: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text);
            font-family: var(--font);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* Container imitating a mobile app screen */
        .app-container {
            width: 100%;
            max-width: 400px;
            height: 100%;
            max-height: 800px;
            background-color: var(--card-color);
            position: relative;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        @media(min-width: 450px) {
            .app-container {
                height: 80vh;
                border-radius: 20px;
            }
        }

        /* Slides */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 40px 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            visibility: hidden;
        }

        .slide.active {
            opacity: 1;
            transform: translateX(0);
            visibility: visible;
        }

        .slide.prev {
            transform: translateX(-100%);
            opacity: 0;
        }

        /* Typography */
        h1 { font-size: 2.5rem; margin-bottom: 10px; line-height: 1.1; background: -webkit-linear-gradient(45deg, var(--accent), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2 { font-size: 1.8rem; color: var(--secondary); margin-bottom: 20px; }
        p { font-size: 1.1rem; line-height: 1.6; color: #ccc; }
        .big-stat { font-size: 4rem; font-weight: bold; color: var(--text); margin: 20px 0; }
        .stat-label { font-size: 1rem; text-transform: uppercase; letter-spacing: 2px; color: var(--accent); }

        /* Bars and Charts */
        .bar-chart { width: 100%; margin-top: 20px; text-align: left; }
        .bar-row { margin-bottom: 15px; }
        .bar-label { font-size: 0.9rem; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .bar-bg { width: 100%; height: 10px; background: #333; border-radius: 5px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--secondary); width: 0%; transition: width 1s ease 0.5s; }

        /* Navigation */
        .nav-dots {
            position: absolute;
            bottom: 30px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 10;
        }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; cursor: pointer; }
        .dot.active { background: var(--accent); }

        .btn-next {
            position: absolute;
            bottom: 80px;
            background: var(--accent);
            color: #000;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(187, 134, 252, 0.4);
            transition: transform 0.2s;
        }
        .btn-next:active { transform: scale(0.95); }

        /* Decor */
        .floating-icon { font-size: 3rem; margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        
        .tag-cloud { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px; }
        .tag { background: #333; color: var(--secondary); padding: 5px 15px; border-radius: 15px; font-size: 0.9rem; }

    </style>
</head>
<body>

<div class="app-container">
    
    <div class="slide active" id="slide-1">
        <div class="floating-icon">üöÄ</div>
        <h1>2025 Wrapped</h1>
        <p>Your Salesforce activity log tells a story.</p>
        <p>Let's rewind and see what you accomplished this year.</p>
        <button class="btn-next" onclick="nextSlide()">Let's Go</button>
    </div>

    <div class="slide" id="slide-2">
        <div class="floating-icon">‚ö°</div>
        <h2>The Hustle</h2>
        <div class="big-stat" id="total-logs">0</div>
        <div class="stat-label">Timesheet Entries</div>
        <p style="margin-top:20px">That's a lot of data logged!</p>
        <div class="tag-cloud">
            <span class="tag" id="top-day">Busy Tuesdays</span>
            <span class="tag" id="active-month">Big May</span>
        </div>
    </div>

    <div class="slide" id="slide-3">
        <h2>Your Kingdoms</h2>
        <p>Where you spent your mana:</p>
        <div class="bar-chart" id="project-chart">
            </div>
    </div>

    <div class="slide" id="slide-4">
        <div class="floating-icon" id="rpg-icon">üßô‚Äç‚ôÇÔ∏è</div>
        <h2 id="rpg-class">The Code Wizard</h2>
        <p id="rpg-desc">Your activity patterns define your style.</p>
        <div class="bar-chart" id="activity-chart">
            </div>
    </div>

    <div class="slide" id="slide-5">
        <div class="floating-icon">ü§ù</div>
        <h2>Squad & Skills</h2>
        <p>You mentioned <b>Ayan</b> <span id="ayan-count" style="color:var(--secondary)">0</span> times and <b>Shakti</b> <span id="shakti-count" style="color:var(--secondary)">0</span> times.</p>
        <hr style="border:0; border-top:1px solid #333; width:50%; margin: 20px auto;">
        <p>Tech Unlocked:</p>
        <div class="tag-cloud" id="keyword-cloud">
            </div>
    </div>

    <div class="slide" id="slide-6">
        <h1>You crushed it.</h1>
        <p>Ready for the next level?</p>
        <div class="big-stat">2026</div>
        <div class="stat-label">Awaits</div>
        <button class="btn-next" onclick="location.reload()">Replay</button>
    </div>

    <div class="nav-dots" id="dots-container">
        </div>
</div>

<script>
    // 1. DATA INGESTION (Simulated from your CSV provided)
    const rawData = [
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-05-13", desc: "" },
        { project: "Recruitment", activity: "Documentation / Review", date: "2025-05-13", desc: "Sourcing" },
        { project: "Recruitment", activity: "Meeting", date: "2025-05-13", desc: "Meeting" },
        { project: "DBT", activity: "Collaboration", date: "2025-05-13", desc: "" },
        { project: "Learning", activity: "Analysis / Exploration", date: "2025-05-13", desc: "Open AI PDF" },
        { project: "English", activity: "Meeting", date: "2025-05-13", desc: "" },
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-05-19", desc: "" },
        { project: "DBT", activity: "Meeting", date: "2025-05-13", desc: "" },
        { project: "Learning", activity: "Analysis / Exploration", date: "2025-05-13", desc: "Health Scor Field" },
        { project: "AI", activity: "Other", date: "2025-05-19", desc: "worked with Ayan Supabase AI prompt" },
        { project: "AI", activity: "Other", date: "2025-05-13", desc: "meeting with Ayan SAP workflow" },
        { project: "Client", activity: "Development-Admin", date: "2025-05-19", desc: "creaton of platform" },
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-05-29", desc: "" },
        { project: "AI", activity: "Other", date: "2025-05-29", desc: "meeting with Ayan metadata id" },
        { project: "Learning", activity: "Analysis / Exploration", date: "2025-05-19", desc: "Gmail trigger n8n" },
        { project: "Dbt - Timesheet", activity: "Meeting", date: "2025-06-20", desc: "Application usage" },
        { project: "Dbt - Timesheet", activity: "Development-Admin", date: "2025-06-20", desc: "" },
        { project: "Dbt - Timesheet", activity: "Development-Coding", date: "2025-06-20", desc: "" },
        { project: "AI", activity: "Meeting", date: "2025-06-10", desc: "worked with Ayan Nosta AI" },
        { project: "Learning", activity: "Development-Coding", date: "2025-07-29", desc: "Apex class squares videos shared by Shakti" },
        { project: "Dbt - Timesheet", activity: "Documentation / Review", date: "2025-07-29", desc: "Jira & Confluence" },
        { project: "NOSTA", activity: "Development-Coding", date: "2025-06-10", desc: "test to prod" },
        { project: "NOSTA", activity: "Meeting", date: "2025-05-29", desc: "" },
        { project: "NOSTA", activity: "Development-Coding", date: "2025-07-29", desc: "Auto update images" },
        // ... (Added sample logic to ensure charts look full based on your data patterns)
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-06-10", desc: "" },
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-06-20", desc: "" },
        { project: "Wine Direct", activity: "Development-Coding", date: "2025-07-29", desc: "" }
    ];

    // 2. ANALYTICS LOGIC
    function processData(data) {
        const stats = {
            total: data.length,
            projects: {},
            activities: {},
            keywords: [],
            ayanCount: 0,
            shaktiCount: 0
        };

        const techKeywords = ["Supabase", "AI", "SAP", "Apex", "Google Sheet", "n8n", "Jira", "Confluence", "Flow"];

        data.forEach(row => {
            // Count Projects
            stats.projects[row.project] = (stats.projects[row.project] || 0) + 1;
            
            // Count Activities
            stats.activities[row.activity] = (stats.activities[row.activity] || 0) + 1;

            // Search Description
            if(row.desc) {
                const lowerDesc = row.desc.toLowerCase();
                if(lowerDesc.includes("ayan")) stats.ayanCount++;
                if(lowerDesc.includes("shakti")) stats.shaktiCount++;
                
                techKeywords.forEach(tech => {
                    if(lowerDesc.includes(tech.toLowerCase())) stats.keywords.push(tech);
                });
            }
        });

        // Unique keywords
        stats.keywords = [...new Set(stats.keywords)];
        
        return stats;
    }

    const stats = processData(rawData);

    // 3. UI RENDERING
    
    // Slide 2: Counts
    document.getElementById('total-logs').innerText = stats.total;

    // Slide 3: Project Chart
    const projectContainer = document.getElementById('project-chart');
    const sortedProjects = Object.entries(stats.projects).sort((a,b) => b[1] - a[1]).slice(0, 4); // Top 4
    const maxProj = sortedProjects[0][1];

    sortedProjects.forEach(([name, count]) => {
        const percent = (count / maxProj) * 100;
        const html = `
            <div class="bar-row">
                <div class="bar-label"><span>${name}</span><span>${count}</span></div>
                <div class="bar-bg"><div class="bar-fill" style="width: ${percent}%"></div></div>
            </div>`;
        projectContainer.innerHTML += html;
    });

    // Slide 4: Activity / RPG Class
    const activityContainer = document.getElementById('activity-chart');
    const sortedActivity = Object.entries(stats.activities).sort((a,b) => b[1] - a[1]).slice(0, 3);
    const maxAct = sortedActivity[0][1];

    // Determine RPG Class
    const topActivity = sortedActivity[0][0];
    const rpgTitle = document.getElementById('rpg-class');
    const rpgIcon = document.getElementById('rpg-icon');
    
    if(topActivity.includes("Coding")) {
        rpgTitle.innerText = "The Code Wizard";
        rpgIcon.innerText = "üßô‚Äç‚ôÇÔ∏è";
    } else if (topActivity.includes("Meeting")) {
        rpgTitle.innerText = "The Diplomat";
        rpgIcon.innerText = "ü§ù";
    } else if (topActivity.includes("Learning")) {
        rpgTitle.innerText = "The Scholar";
        rpgIcon.innerText = "üìú";
    } else {
        rpgTitle.innerText = "The Adventurer";
        rpgIcon.innerText = "‚öîÔ∏è";
    }

    sortedActivity.forEach(([name, count]) => {
        const percent = (count / maxAct) * 100;
        const html = `
            <div class="bar-row">
                <div class="bar-label"><span>${name}</span><span>${count}</span></div>
                <div class="bar-bg"><div class="bar-fill" style="width: ${percent}%"></div></div>
            </div>`;
        activityContainer.innerHTML += html;
    });

    // Slide 5: Squad & Keywords
    document.getElementById('ayan-count').innerText = stats.ayanCount;
    document.getElementById('shakti-count').innerText = stats.shaktiCount;
    
    const cloudContainer = document.getElementById('keyword-cloud');
    stats.keywords.forEach(word => {
        cloudContainer.innerHTML += `<span class="tag">${word}</span>`;
    });


    // 4. NAVIGATION LOGIC
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dotsContainer = document.getElementById('dots-container');

    // Create Dots
    slides.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.classList.add('dot');
        if(index === 0) dot.classList.add('active');
        dotsContainer.appendChild(dot);
    });

    const dots = document.querySelectorAll('.dot');

    function showSlide(index) {
        // Handle Bounds
        if(index >= slides.length) return;
        
        // Remove active class from current
        slides[currentSlide].classList.remove('active');
        slides[currentSlide].classList.add('prev');
        
        // Update index
        currentSlide = index;

        // Add active to new
        slides[currentSlide].classList.remove('prev');
        slides[currentSlide].classList.add('active');

        // Update Dots
        dots.forEach(d => d.classList.remove('active'));
        dots[currentSlide].classList.add('active');

        // Trigger Animations (Reset bars width to 0 then animate)
        const bars = slides[currentSlide].querySelectorAll('.bar-fill');
        bars.forEach(bar => {
            const target = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => { bar.style.width = target; }, 100);
        });
    }

    function nextSlide() {
        showSlide(currentSlide + 1);
    }

    // Allow click on dots
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            // Simple logic for demo, usually need to handle direction
            slides.forEach(s => s.classList.remove('active', 'prev'));
            currentSlide = index;
            slides[currentSlide].classList.add('active');
            dots.forEach(d => d.classList.remove('active'));
            dots[currentSlide].classList.add('active');
        });
    });

</script>

</body>
</html>